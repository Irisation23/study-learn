# πμΏ ν‚¤(cookie)μ™€ π¥ μ„Έμ…(session)

## HTTP ν”„λ΅ν† μ½μ νΉμ§•

### λΉ„μ—°κ²° μ§€ν–¥(Connectionless)
- ν΄λΌμ΄μ–ΈνΈκ°€ request λ¥Ό μ„λ²„μ— λ³΄λ‚΄κ³ ,
- μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ— μ”μ²­μ— λ§λ” response λ¥Ό λ³΄λ‚΄λ©΄
- μ¦‰μ‹ μ—°κ²°μ„ λμ.
- Why??
  - TODO

### μƒνƒμ •λ³΄ μ μ§€ μ• ν•¨(Stateless)
- μ—°κ²°μ„ λλ” μκ°„ ν΄λ¦¬μ΄μ–ΈνΈμ™€ μ„λ²„μ ν†µμ‹ μ€ λλ‚¨.
- μƒνƒ μ •λ³΄λ¥Ό μ μ§€ν•μ§€ μ•μ.
- Why??
  - TODO


### μΏ ν‚¤μ™€ μ„Έμ…μ ν•„μ”μ„±
- HTTP ν”„λ΅ν† μ½μ€ μ„μ™€ κ°™μ€ νΉμ§•μΌλ΅ λ¨λ“  μ”μ²­ κ°„ μμ΅΄κ΄€κ³„κ°€ μ—†μ.
- μ¦‰, ν„μ¬ μ ‘μ†ν• μ‚¬μ©μκ°€ μ΄μ „μ— μ ‘μ†ν–λ μ‚¬μ©μμ™€ κ°™μ€ μ‚¬μ©μμΈμ§€ μ• μ μ—†μ.
- κ³„μ†ν•΄μ„ μ—°κ²°μ„ μ μ§€ν•μ§€ μ•κΈ° λ•λ¬Έμ— λ¦¬μ†μ¤ λ‚­λΉ„κ°€ μ¤„μ–΄λ“¬.π‘
- ν•μ§€λ§, ν†µμ‹ ν•  λ•λ§λ‹¤ μƒλ΅ μ—°κ²°ν•κΈ° λ•λ¬Έμ— ν΄λΌμ΄μ–ΈνΈλ” λ§¤ μ”μ²­λ§λ‹¤ μΈμ¦ ν•΄μ•Όν•¨.π‘
- μ΄μ „ μ”μ²­κ³Ό ν„μ¬ μ”μ²­μ΄ κ°™μ€ μ‚¬μ©μμ μ”μ²­μΈμ§€ μ•κΈ° μ„ν•΄μ„λ” μƒνƒλ¥Ό μ μ§€ ν•΄μ•Όν•¨.
- HTTP ν”„λ΅ν† μ½μ—μ„ μƒνƒλ¥Ό μ μ§€ν•κΈ° μ„ν• κΈ°μ λ΅ μΏ ν‚¤μ™€ μ„Έμ…μ„ μ΄μ©ν•¨.

***

## μΏ ν‚¤??

### κ°λ…
- ν΄λΌμ΄μ–ΈνΈ λ΅μ»¬μ— μ €μ¥λλ” ν‚¤μ™€ κ°’μ΄ λ“¤μ–΄μλ” νμΌμ„.
- μ΄λ¦„, κ°’, μ ν¨μ‹κ°„, κ²½λ΅ λ“±μ„ ν¬ν•¨ν•κ³  μμ.
- ν΄λΌμ΄μ–ΈνΈμ μƒνƒ μ •λ³΄λ¥Ό λΈλΌμ°μ €μ— μ €μ¥ν•μ—¬ μ°Έμ΅°ν•¨.

### κµ¬μ„±μ”μ†
1. μ΄λ¦„(name)
2. κ°’(value)
3. λ§λ£μ‹κ°„(expires)
4. μ „μ†΅ν•  λ„λ©”μΈ μ΄λ¦„(domain)
5. μ „μ†΅ν•  κ²½λ΅(path)
6. λ³΄μ• μ—°κ²° μ—¬λ¶€(secure)
7. `HttpOnly` μ—¬λ¶€(HttpOnly)

### λ™μ‘ λ°©μ‹
![image](https://user-images.githubusercontent.com/53285909/184312770-f85ed402-851d-4498-beb2-e4493dc9484d.png)
1. μ›ΉλΈλΌμ°μ €κ°€ μ„λ²„μ— μ”μ²­
2. μƒνƒλ¥Ό μ μ§€ν•κ³  μ‹¶μ€ κ°’μ„ μΏ ν‚¤(Cookie) λ΅ μƒμ„±
3. μ„λ²„κ°€ μ‘λ‹µν•  λ• HTTP ν—¤λ”(Set-Cookie) μ— μΏ ν‚¤λ¥Ό ν¬ν•¨ν•΄μ„ μ „μ†΅
```
Set-Cokie: id=foo
```
4. μ „λ‹¬λ°›μ€ μΏ ν‚¤λ” μ›ΉλΈλΌμ°μ €μ—μ„ κ΄€λ¦¬ν•κ³  μλ‹¤κ°€, λ‹¤μ μ”μ²­ λ• μΏ ν‚¤λ¥Ό HTTP ν—¤λ”μ— λ„£μ–΄μ„ μ „μ†΅
```
Cookie: id=foo
```
5. μ„λ²„μ—μ„λ” μΏ ν‚¤ μ •λ³΄λ¥Ό μ½μ–΄ μ΄μ „ μƒνƒ μ •λ³΄λ¥Ό ν™•μΈν• ν›„ μ‘λ‹µ

## μ„Έμ…??

### κ°λ…
- μΌμ • μ‹κ°„ λ™μ• κ°™μ€ λΈλΌμ°μ €λ΅λ¶€ν„° λ“¤μ–΄μ¤λ” μ”μ²­μ„ ν•λ‚μ μƒνƒλ΅ λ³΄κ³  κ·Έ μƒνƒλ¥Ό μ μ§€ν•λ” κΈ°μ μ„.
- μ¦‰, μ›Ή λΈλΌμ°μ €λ¥Ό ν†µν•΄ μ„λ²„μ— μ ‘μ†ν• μ΄ν›„λ¶€ν„° λΈλΌμ°μ €λ¥Ό μΆ…λ£ν•  λ•κΉμ§€ μ μ§€λλ” μƒνƒμ΄λ‹¤.

### λ™μ‘λ°©μ‹
![image](https://user-images.githubusercontent.com/53285909/184313861-4ba55573-a6c7-4590-b925-9ed90dbbba06.png)
1. μ›ΉλΈλΌμ°μ €κ°€ μ„λ²„μ— μ”μ²­
2. μ„λ²„κ°€ ν•΄λ‹Ή μ›ΉλΈλΌμ°μ €(ν΄λΌμ΄μ–ΈνΈ)μ— μ μΌν• ID(Session ID)λ¥Ό λ¶€μ—¬ν•¨.
3. μ„λ²„κ°€ μ‘λ‹µν•  λ• HTTP ν—¤λ”(Set-Cookie)μ— Session ID λ¥Ό ν¬ν•¨ν•΄μ„ μ „μ†΅
```
Set-Cookie: JSESSIONID=bar
```
4. μ›ΉλΈλΌμ°μ €λ” μ΄ν›„ μ›ΉλΈλΌμ°μ €λ¥Ό λ‹«κΈ°κΉμ§€ λ‹¤μ μ”μ²­ λ• λ¶€μ—¬λ Session ID κ°€ λ‹΄κ²¨μλ” μΏ ν‚¤λ¥Ό HTTP ν—¤λ”μ— λ„£μ–΄μ„ μ „μ†΅
```
Cookie: JSESSIONID=bar
```
5. μ„λ²„λ” μ„Έμ… ID λ¥Ό ν™•μΈν•κ³ , ν•΄λ‹Ή μ„Έμ…μ— κ΄€λ ¨λ μ •λ³΄λ¥Ό ν™•μΈν• ν›„ μ‘λ‹µ.
> μ„Έμ…λ„ μΏ ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ κ°’μ„ μ£Όκ³  λ°›μΌλ©° ν΄λΌμ΄μ–ΈνΈμ μƒνƒ μ •λ³΄λ¥Ό μ μ§€ν•λ‹¤.
> μ¦‰, μƒνƒ μ •λ³΄λ¥Ό μ μ§€ν•λ” μλ‹¨μ€ `μΏ ν‚¤` μ΄λ‹¤.

## μ •λ¦¬

### μ €μ¥ μ„μΉ
- μΏ ν‚¤: ν΄λΌμ΄μ–ΈνΈ
- μ„Έμ…: μ„λ²„

### λ³΄μ•
- μΏ ν‚¤: ν΄λΌμ΄μ–ΈνΈμ— μ €μ¥λλ―€λ΅ λ³΄μ•μ— μ·¨μ•½.
- μ„Έμ…: μΏ ν‚¤λ¥Ό μ΄μ©ν•΄ Session ID λ§ μ €μ¥ν•κ³ , μ΄ κ°’μΌλ΅ κµ¬λ¶„ν•΄μ„ μ„λ²„μ—μ„ μ²λ¦¬ν•λ―€λ΅ λΉ„κµμ  λ³΄μ•μ΄ μΆ‹μ.

### λΌμ΄ν”„μ‚¬μ΄ν΄
- μΏ ν‚¤: λ§λ£μ‹κ°„μ— λ”°λΌ λΈλΌμ°μ €λ¥Ό μΆ…λ£ν•΄λ„ κ³„μ†ν•΄μ„ λ‚¨μ•„ μμ„ μ μλ‹¤.
- μ„Έμ…: λ§λ£μ‹κ°„μ„ μ •ν•  μ μμ§€λ§ λΈλΌμ°μ €κ°€ μΆ…λ£λλ©΄ λ§λ£μ‹κ°„μ— μƒκ΄€μ—†μ΄ μ‚­μ λλ‹¤.

### μ†λ„
- μΏ ν‚¤: ν΄λΌμ΄μ–ΈνΈμ— μ €μ¥λμ–΄μμ–΄μ„ μ„λ²„μ— μ”μ²­ μ‹ λΉ λ¥΄λ‹¤.
- μ„Έμ…: μ‹¤μ  μ €μ¥λ μ •λ³΄κ°€ μ„λ²„μ— μμΌλ―€λ΅ μ„λ²„μ μ²λ¦¬κ°€ ν•„μ”ν•΄ μΏ ν‚¤λ³΄λ‹¤ λλ¦¬λ‹¤.

***
[λ΅μ»¬ μ¤ν† λ¦¬μ§€μ™€ μ„Έμ… μ¤ν† λ¦¬μ§€](https://racoonlotty.tistory.com/entry/%EC%BF%A0%ED%82%A4%EC%99%80-%EC%84%B8%EC%85%98-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EB%A1%9C%EC%BB%AC-%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80%EC%99%80-%EC%84%B8%EC%85%98-%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80)
- TODO 